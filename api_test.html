<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API í…ŒìŠ¤íŠ¸ ë„êµ¬</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-card { border: 1px solid #ddd; padding: 20px; margin: 10px 0; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .loading { background-color: #fff3cd; border-color: #ffeaa7; }
        button { padding: 10px 20px; margin: 5px; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 3px; overflow: auto; }
    </style>
</head>
<body>
    <h1>ğŸ”§ API ì—°ê²° í…ŒìŠ¤íŠ¸</h1>
    
    <button onclick="testAllAPIs()">ëª¨ë“  API í…ŒìŠ¤íŠ¸</button>
    
    <div id="results"></div>

    <script>
        // API í‚¤ ì„¤ì •
        const API_KEYS = {
            naver_client_id: 'MRrqB4usbuuk9uuXzZDM',
            naver_client_secret: 'Yoionk4bGp',
            naver_blog_client_id: '7kbgK3Fi__DX0_cnJOEp',
            naver_blog_client_secret: 'QyfsHO2dIk',
            google_api_key: 'AIzaSyBNDjMJqJnzpJKc3Hnfq2yh40UTkWPFmJU',
            google_search_engine_id: '0623a984354754d30',
            dart_api_key: '416dbd4f88fd71c98204eec5b5502a4daf8045cd',
            kakao_js: '1ac6eee9b1e4c2e0cc6f1d1ca1a6a559'
        };

        function createTestCard(title, status = 'loading') {
            const card = document.createElement('div');
            card.className = `test-card ${status}`;
            card.innerHTML = `
                <h3>${title}</h3>
                <div class="content">í…ŒìŠ¤íŠ¸ ì¤‘...</div>
            `;
            return card;
        }

        function updateTestCard(card, content, status) {
            card.className = `test-card ${status}`;
            card.querySelector('.content').innerHTML = content;
        }

        async function testGoogleSearch() {
            const card = createTestCard('ğŸŒ êµ¬ê¸€ Custom Search API');
            document.getElementById('results').appendChild(card);

            try {
                const url = `https://www.googleapis.com/customsearch/v1?key=${API_KEYS.google_api_key}&cx=${API_KEYS.google_search_engine_id}&q=ë„¤ì´ë²„ ì‚¬ì˜¥ ì´ì „&num=3`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.items && data.items.length > 0) {
                    updateTestCard(card, `
                        <strong>âœ… ì„±ê³µ!</strong><br>
                        ${data.items.length}ê°œ ê²°ê³¼ ì¡°íšŒ<br>
                        ì²« ë²ˆì§¸ ê²°ê³¼: ${data.items[0].title}
                    `, 'success');
                    return true;
                } else if (data.error) {
                    updateTestCard(card, `
                        <strong>âŒ ì‹¤íŒ¨!</strong><br>
                        ì˜¤ë¥˜: ${data.error.message}
                    `, 'error');
                    return false;
                } else {
                    updateTestCard(card, `
                        <strong>âš ï¸ ê²°ê³¼ ì—†ìŒ</strong><br>
                        ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
                    `, 'error');
                    return false;
                }
            } catch (error) {
                updateTestCard(card, `
                    <strong>âŒ ì‹¤íŒ¨!</strong><br>
                    ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${error.message}
                `, 'error');
                return false;
            }
        }

        async function testDartAPI() {
            const card = createTestCard('ğŸ“Š DART API');
            document.getElementById('results').appendChild(card);

            try {
                const url = `https://opendart.fss.or.kr/api/list.json?crtfc_key=${API_KEYS.dart_api_key}&corp_name=ë„¤ì´ë²„&bgn_de=20231201&end_de=20241201&page_no=1&page_count=5`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.status === '000' && data.list) {
                    updateTestCard(card, `
                        <strong>âœ… ì„±ê³µ!</strong><br>
                        ${data.list.length}ê°œ ê³µì‹œ ì¡°íšŒ<br>
                        ì²« ë²ˆì§¸ ê³µì‹œ: ${data.list[0].report_nm || 'N/A'}
                    `, 'success');
                    return true;
                } else {
                    updateTestCard(card, `
                        <strong>âŒ ì‹¤íŒ¨!</strong><br>
                        ìƒíƒœ: ${data.status} - ${data.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}
                    `, 'error');
                    return false;
                }
            } catch (error) {
                updateTestCard(card, `
                    <strong>âŒ ì‹¤íŒ¨!</strong><br>
                    CORS ì˜¤ë¥˜ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ: ${error.message}<br>
                    <small>DART APIëŠ” ì„œë²„ì‚¬ì´ë“œì—ì„œ í˜¸ì¶œí•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</small>
                `, 'error');
                return false;
            }
        }

        async function testNaverAPIs() {
            const card = createTestCard('ğŸ” ë„¤ì´ë²„ APIë“¤');
            document.getElementById('results').appendChild(card);

            updateTestCard(card, `
                <strong>âš ï¸ CORS ì œí•œ</strong><br>
                ë„¤ì´ë²„ APIëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í˜¸ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
                ì„œë²„ì‚¬ì´ë“œ (Python) êµ¬í˜„ì—ì„œ í…ŒìŠ¤íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.<br>
                <small>API í‚¤ëŠ” ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.</small>
            `, 'error');
            return false;
        }

        async function testKakaoMap() {
            const card = createTestCard('ğŸ—ºï¸ ì¹´ì¹´ì˜¤ë§µ API');
            document.getElementById('results').appendChild(card);

            try {
                // ì¹´ì¹´ì˜¤ë§µ SDK ë¡œë“œ í…ŒìŠ¤íŠ¸
                const script = document.createElement('script');
                script.src = `//dapi.kakao.com/v2/maps/sdk.js?appkey=${API_KEYS.kakao_js}`;
                
                script.onload = () => {
                    updateTestCard(card, `
                        <strong>âœ… ì„±ê³µ!</strong><br>
                        ì¹´ì¹´ì˜¤ë§µ JavaScript SDK ë¡œë“œ ì™„ë£Œ<br>
                        API í‚¤ê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.
                    `, 'success');
                };
                
                script.onerror = () => {
                    updateTestCard(card, `
                        <strong>âŒ ì‹¤íŒ¨!</strong><br>
                        ì¹´ì¹´ì˜¤ë§µ SDK ë¡œë“œ ì‹¤íŒ¨<br>
                        API í‚¤ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.
                    `, 'error');
                };
                
                document.head.appendChild(script);
                return true;
                
            } catch (error) {
                updateTestCard(card, `
                    <strong>âŒ ì‹¤íŒ¨!</strong><br>
                    ì˜¤ë¥˜: ${error.message}
                `, 'error');
                return false;
            }
        }

        async function testAllAPIs() {
            document.getElementById('results').innerHTML = '';
            
            console.log('ğŸš€ API í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            const results = [];
            
            // êµ¬ê¸€ ê²€ìƒ‰ API í…ŒìŠ¤íŠ¸
            results.push(await testGoogleSearch());
            
            // DART API í…ŒìŠ¤íŠ¸
            results.push(await testDartAPI());
            
            // ë„¤ì´ë²„ API í…ŒìŠ¤íŠ¸ (ì œí•œì‚¬í•­ ì•ˆë‚´)
            results.push(await testNaverAPIs());
            
            // ì¹´ì¹´ì˜¤ë§µ API í…ŒìŠ¤íŠ¸
            results.push(await testKakaoMap());
            
            // ê²°ê³¼ ìš”ì•½
            const successCount = results.filter(r => r).length;
            const summaryCard = createTestCard('ğŸ“‹ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½', 'success');
            summaryCard.innerHTML = `
                <h3>ğŸ“‹ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½</h3>
                <div class="content">
                    <strong>ì „ì²´ ê²°ê³¼: ${successCount}/${results.length} ì„±ê³µ</strong><br><br>
                    
                    <h4>ğŸ“ ì£¼ìš” ë°œê²¬ì‚¬í•­:</h4>
                    <ul>
                        <li><strong>êµ¬ê¸€ ê²€ìƒ‰ API:</strong> ë¸Œë¼ìš°ì €ì—ì„œ ì •ìƒ ì‘ë™</li>
                        <li><strong>DART API:</strong> CORS ì œí•œìœ¼ë¡œ ì„œë²„ êµ¬í˜„ í•„ìš”</li>
                        <li><strong>ë„¤ì´ë²„ API:</strong> CORS ì œí•œìœ¼ë¡œ ì„œë²„ êµ¬í˜„ í•„ìš”</li>
                        <li><strong>ì¹´ì¹´ì˜¤ë§µ API:</strong> JavaScriptì—ì„œ ì •ìƒ ì‘ë™</li>
                    </ul>
                    
                    <h4>ğŸ’¡ ê¶Œì¥ì‚¬í•­:</h4>
                    <p>ì‹¤ì œ ë°ì´í„° ìˆ˜ì§‘ì€ Python ìŠ¤í¬ë¦½íŠ¸ë¡œ ì§„í–‰í•˜ê³ ,<br>
                    ëŒ€ì‹œë³´ë“œëŠ” ìˆ˜ì§‘ëœ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.</p>
                </div>
            `;
            
            document.getElementById('results').appendChild(summaryCard);
            
            console.log(`ğŸ¯ í…ŒìŠ¤íŠ¸ ì™„ë£Œ: ${successCount}/${results.length} ì„±ê³µ`);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ í…ŒìŠ¤íŠ¸
        window.onload = () => {
            console.log('API í‚¤ ì„¤ì • í™•ì¸:', Object.keys(API_KEYS));
        };
    </script>
</body>
</html>